<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link
    rel="stylesheet"
    href="../assets/prism.css"
  />
    <link rel="stylesheet" href="styles.css">
    <title>Chelsea.js Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="navbar">
        <div class="logo"> <span style="font-weight: 800;">CHELSEA</span>JS</div>
        <a href="javascript:void(0);" class="navbar-burger" onclick="navbar_resp()">
            <i class="fa fa-bars"></i>
            </a>
        <div class="navstuff">
            <div>
                <a href="../index.html">Home</a>
            </div>
            <div>
                <a href="../examples.html">Examples</a>
            </div>
            <div>
                <a href="../download.html">Download</a>
            </div>
            <div>
                <a href="https://www.github.com/beetrandahiya">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 1024 1024" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" transform="scale(64)" fill="#1B1F23"/>
                        </svg>                </a>
            </div>
            
        </div>
       
    </div>
    <div class="main">
        <div class="sidebar">
            <div class="sidebar-elem ">
                <a href="../index.html">Getting Started</a>
            </div>
            <button class="dropdown-btn">Shapes <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../shapes/point.html">Point</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/line.html">Line</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/rectangle.html">Rectangle</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/circle.html">Circle</a>
                </div>  
                <div class="sidebar-elem">
                    <a href="../shapes/ellipse.html">Ellipse</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/arc.html">Arc</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/polygon.html">Polygon</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/regpolygon.html">Regular Polygon</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/star.html">Star</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/cubbezier.html">Cubic Bezier Curve</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/twopointcubicbezier.html">Two Point Cubic Bezier Curve</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/twopointquadbezier.html">Two Point Cubic Bezier Curve</a>
                </div>
                

                

            </div>
            <button class="dropdown-btn">Enviroment <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../enviro/width.html">Width</a>
                    </div>  
                <div class="sidebar-elem">
                    <a href="../enviro/height.html">Height</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../enviro/framerate.html">frameRate</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../enviro/clearCanvas.html">clearCanvas</a>
                    </div>
                



            </div>
            <button class="dropdown-btn">Math <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../math/trignometry.html">Trigonometry</a>
                    </div>  
                <div class="sidebar-elem">
                    <a href="../math/algebra.html">Algebraic Functions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/conversions.html">Conversions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/interp.html">Interpolations</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/random.html">Random Functions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/scaling.html">Scaling Functions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/constants.html">Constants</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../math/vector.html">Vector Functions</a>
                </div>
            </div>
            <button class="dropdown-btn">Color <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../color/rgb.html">RGB</a>
                </div>
<div class="sidebar-elem">
                    <a href="../color/hsl.html">HSL</a>
                </div>
<div class="sidebar-elem">
                    <a href="../color/hex.html">Hex</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../color/lerpColor.html">Lerp Color</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../color/colorConversions.html">Color Conversions</a>
                </div>
            </div>
            <button class="dropdown-btn">Events <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../events/mouse.html">Mouse</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../events/keyboard.html">Keyboard</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../events/touch.html">Touch</a>
                </div>
            </div>
            <button class="dropdown-btn">Time <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                
                
                <div class="sidebar-elem">
                    <a href="../time/getTime.html">Time</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../time/date.html">Date</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../time/day.html">Day</a>
                </div>
                
                <div class="sidebar-elem">
                    <a href="../time/timeTaken.html">Execution time</a>
                    </div>
            </div>
            


            

        </div>
        <div class="doc">
            <div class="example-container">

    
        </div>
        <h1>
           Collision   </h1>
        <p>
          A sweet Collision Simulation in ChelseaJS.
          Basic Kinematics is used to model such Simulations.
        </p>

        <h3>
            Code
        </h3>
        <pre>
            <code class="language-js">
    elem=document.querySelector(".example-container");
    setCanvas(elem);
    arr=[];

    //making sure there is no overlap in circles at start

    overlap=false;
    for(i=0;i&lt;30;i++){
        x=random(70,WIDTH-70);
        y=random(70,HEIGHT-70);
        r=random(30,50);
        for(j=0;j&lt;arr.length;j++){
            if(dist(x,y,arr[j].x,arr[j].y)&lt;r+arr[j].r){
                i--;
                overlap=true;
                break;
            }
            else{
                overlap=false;
            }
        }

        if(!overlap){
        arr.push({
            x:x,
            y:y,
            r:r,
            vx:Math.random()*2-1,
            vy:Math.random()*2-1
        }
        )};
    }

    function draw(){
        clearCanvas()
        for(i=0;i&lt;14;i++){
            new circle(arr[i].x,arr[i].y,arr[i].r,'#fff',1,'#222',0.5);
            arr[i].x+=arr[i].vx;
            arr[i].y+=arr[i].vy;
            collision_wall(arr[i]);
        }
        collision_circles(arr);
        
        requestAnimationFrame(draw);
    }
    
    draw();

    function collision_circles(pos_arr){
        for(i=0;i&lt;pos_arr.length;i++){
            for(j=i+1;j&lt;pos_arr.length;j++){
                if(dist(pos_arr[i].x,pos_arr[i].y,pos_arr[j].x,pos_arr[j].y)&lt;pos_arr[i].r+pos_arr[j].r){
                    phi= Math.atan2(pos_arr[j].y-pos_arr[i].y,pos_arr[j].x-pos_arr[i].x);
                    theta1=Math.atan2(pos_arr[i].vy,pos_arr[i].vx);
                    theta2=Math.atan2(pos_arr[j].vy,pos_arr[j].vx);
                    m1=pos_arr[i].r*pos_arr[i].r;
                    m2=pos_arr[j].r*pos_arr[j].r;
                    v1=sqrt(pos_arr[i].vx*pos_arr[i].vx+pos_arr[i].vy*pos_arr[i].vy);
                    v2=sqrt(pos_arr[j].vx*pos_arr[j].vx+pos_arr[j].vy*pos_arr[j].vy);
                    vn1=v1*cos(phi-theta1);
                    vn2=v2*cos(phi-theta2);
                    vt1=v1*sin(phi-theta1);
                    vt2=v2*sin(phi-theta2);

                    vf1=vn1*(m1-m2)/(m1+m2)+vn2*(2*m2)/(m1+m2);
                    vf2=vn2*(m2-m1)/(m1+m2)+vn1*(2*m1)/(m1+m2);

                    pos_arr[i].vx=vf1*cos(phi)+vt1*sin(phi);
                    pos_arr[i].vy=vf1*sin(phi)-vt1*cos(phi);
                    pos_arr[j].vx=vf2*cos(phi)+vt2*sin(phi);
                    pos_arr[j].vy=vf2*sin(phi)-vt2*cos(phi);



                }
            }
        }
    }
    function collision_wall(pos){
        if(pos.x-pos.r&lt;0){
            pos.vx*=-1;
        }
        if(pos.x+pos.r&gt;WIDTH){
            pos.vx*=-1;
        }
        if(pos.y-pos.r&lt;0){
            pos.vy*=-1;
        }
        if(pos.y+pos.r&gt;HEIGHT){
            pos.vy*=-1;
        }
    } 
            </code>
        </pre>

    </div>
    
    <script src="../main.js"></script>
    <script src="script.js"></script>
    <script>
        elem=document.querySelector(".example-container");
        setCanvas(elem);
        arr=[];

        //making sure there is no overlap in circles at start

        overlap=false;
        for(i=0;i<30;i++){
            x=random(70,WIDTH-70);
            y=random(70,HEIGHT-70);
            r=random(30,50);
            for(j=0;j<arr.length;j++){
                if(dist(x,y,arr[j].x,arr[j].y)<r+arr[j].r){
                    i--;
                    overlap=true;
                    break;
                }
                else{
                    overlap=false;
                }
            }

            if(!overlap){
            arr.push({
                x:x,
                y:y,
                r:r,
                vx:Math.random()*2-1,
                vy:Math.random()*2-1,
                c:randomColorHSL()
            }
            )};
        }

        function draw(){
            clearCanvas()

            for(i=0;i<14;i++){
                new circle(arr[i].x,arr[i].y,arr[i].r,arr[i].c,1,'#222',0.5);
                arr[i].x+=arr[i].vx;
                arr[i].y+=arr[i].vy;
                collision_wall(arr[i]);
            }
            collision_circles(arr);
            
            requestAnimationFrame(draw);
        }
        
        draw();

        function collision_circles(pos_arr){
            for(i=0;i<pos_arr.length;i++){
                for(j=i+1;j<pos_arr.length;j++){
                    if(dist(pos_arr[i].x,pos_arr[i].y,pos_arr[j].x,pos_arr[j].y)<pos_arr[i].r+pos_arr[j].r){
                        phi= Math.atan2(pos_arr[j].y-pos_arr[i].y,pos_arr[j].x-pos_arr[i].x);
                        theta1=Math.atan2(pos_arr[i].vy,pos_arr[i].vx);
                        theta2=Math.atan2(pos_arr[j].vy,pos_arr[j].vx);
                        m1=pos_arr[i].r*pos_arr[i].r;
                        m2=pos_arr[j].r*pos_arr[j].r;
                        v1=sqrt(pos_arr[i].vx*pos_arr[i].vx+pos_arr[i].vy*pos_arr[i].vy);
                        v2=sqrt(pos_arr[j].vx*pos_arr[j].vx+pos_arr[j].vy*pos_arr[j].vy);
                        vn1=v1*cos(phi-theta1);
                        vn2=v2*cos(phi-theta2);
                        vt1=v1*sin(phi-theta1);
                        vt2=v2*sin(phi-theta2);

                        vf1=vn1*(m1-m2)/(m1+m2)+vn2*(2*m2)/(m1+m2);
                        vf2=vn2*(m2-m1)/(m1+m2)+vn1*(2*m1)/(m1+m2);

                        pos_arr[i].vx=vf1*cos(phi)+vt1*sin(phi);
                        pos_arr[i].vy=vf1*sin(phi)-vt1*cos(phi);
                        pos_arr[j].vx=vf2*cos(phi)+vt2*sin(phi);
                        pos_arr[j].vy=vf2*sin(phi)-vt2*cos(phi);



                    }
                }
            }
        }
        function collision_wall(pos){
            if(pos.x-pos.r<0){
                pos.vx*=-1;
            }
            if(pos.x+pos.r>WIDTH){
                pos.vx*=-1;
            }
            if(pos.y-pos.r<0){
                pos.vy*=-1;
            }
            if(pos.y+pos.r>HEIGHT){
                pos.vy*=-1;
            }
        }
    </script>
    
    <script src="../assets/prism.js"></script>


</body>
</html>